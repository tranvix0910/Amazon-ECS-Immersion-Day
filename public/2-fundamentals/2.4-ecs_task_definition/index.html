<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Amazon ECS Task Definition :: DEPLOY APPLICATIONS ON AMAZON ELASTIC CONTAINER SERVICE</title>

    
    <link href="/css/nucleus.css?1765820632" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1765820632" rel="stylesheet">
    <link href="/css/hybrid.css?1765820632" rel="stylesheet">
    <link href="/css/featherlight.min.css?1765820632" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1765820632" rel="stylesheet">
    <link href="/css/auto-complete.css?1765820632" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1765820632" rel="stylesheet">
    <link href="/css/theme.css?1765820632" rel="stylesheet">
    <link href="/css/hugo-theme.css?1765820632" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1765820632" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1765820632"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/2-fundamentals/2.4-ecs_task_definition/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1765820632"></script>
<script type="text/javascript" src="/js/auto-complete.js?1765820632"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1765820632"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/1-introduction/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-fundamentals/" title="Fundamentals" class="dd-item 
        parent
        
        
        ">
      <a href="/2-fundamentals/">
           <b> 2. </b> Fundamentals
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-fundamentals/2.1-ecs_cluster/" title="Amazon ECS Cluster" class="dd-item 
        
        
        
        ">
      <a href="/2-fundamentals/2.1-ecs_cluster/">
           <b> 2.1. </b> Amazon ECS Cluster
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-fundamentals/2.2-ecs_service/" title="Amazon ECS Service" class="dd-item 
        
        
        
        ">
      <a href="/2-fundamentals/2.2-ecs_service/">
           <b> 2.2. </b> Amazon ECS Service
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-fundamentals/2.3-ecs_task/" title="Amazon ECS Task" class="dd-item 
        
        
        
        ">
      <a href="/2-fundamentals/2.3-ecs_task/">
           <b> 2.3. </b> Amazon ECS Task
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-fundamentals/2.4-ecs_task_definition/" title="Amazon ECS Task Definition" class="dd-item 
        
        active
        
        ">
      <a href="/2-fundamentals/2.4-ecs_task_definition/">
           <b> 2.4. </b> Amazon ECS Task Definition
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-express-mode/" title="Express Mode" class="dd-item 
        
        
        
        ">
      <a href="/4-express-mode/">
           <b> 3. </b> Express Mode
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-express-mode/4.1-setup_deploy/" title="Express Mode" class="dd-item 
        
        
        
        ">
      <a href="/4-express-mode/4.1-setup_deploy/">
           <b> 3. </b> Express Mode
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-express-mode/4.2-update/" title="Express Mode" class="dd-item 
        
        
        
        ">
      <a href="/4-express-mode/4.2-update/">
           <b> 3. </b> Express Mode
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-prepare/" title="Prepare" class="dd-item 
        
        
        
        ">
      <a href="/3-prepare/">
           <b> 3. </b> Prepare
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-prepare/3.1-user_accesskey/" title="Create User &amp; Access Key" class="dd-item 
        
        
        
        ">
      <a href="/3-prepare/3.1-user_accesskey/">
           <b> 3.1. </b> Create User &amp; Access Key
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-prepare/3.2-cluster-task_definitions/" title="Create Cluster &amp; Task Definition" class="dd-item 
        
        
        
        ">
      <a href="/3-prepare/3.2-cluster-task_definitions/">
           <b> 3.2. </b> Create Cluster &amp; Task Definition
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-prepare/3.3-services/" title="Services" class="dd-item 
        
        
        
        ">
      <a href="/3-prepare/3.3-services/">
           <b> 3.3. </b> Services
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-prepare/3.4-updated_services/" title="Update Services" class="dd-item 
        
        
        
        ">
      <a href="/3-prepare/3.4-updated_services/">
           <b> 3.4. </b> Update Services
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-prepare/3.5-enable_ecs_exec/" title="Enable ECS Exec" class="dd-item 
        
        
        
        ">
      <a href="/3-prepare/3.5-enable_ecs_exec/">
           <b> 3.5. </b> Enable ECS Exec
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-managed-instances/" title="Managed Instances" class="dd-item 
        
        
        
        ">
      <a href="/5-managed-instances/">
           <b> 4. </b> Managed Instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-managed-instances/5.1-enable/" title="Managed Instances" class="dd-item 
        
        
        
        ">
      <a href="/5-managed-instances/5.1-enable/">
           <b> 4. </b> Managed Instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/6-auto-scaling/" title="Auto Scaling" class="dd-item 
        
        
        
        ">
      <a href="/6-auto-scaling/">
           <b> 5. </b> Auto Scaling
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/7-networking/" title="Networking" class="dd-item 
        
        
        
        ">
      <a href="/7-networking/">
           <b> 6. </b> Networking
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/8-observability/" title="Observability" class="dd-item 
        
        
        
        ">
      <a href="/8-observability/">
           <b> 7. </b> Observability
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/9-security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="/9-security/">
           <b> 8. </b> Security
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/10-deployments/" title="Deployments" class="dd-item 
        
        
        
        ">
      <a href="/10-deployments/">
           <b> 9. </b> Deployments
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/11-storage/" title="Storage" class="dd-item 
        
        
        
        ">
      <a href="/11-storage/">
           <b> 10. </b> Storage
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/12-cost-optimizations/" title="Cost Optimizations" class="dd-item 
        
        
        
        ">
      <a href="/12-cost-optimizations/">
           <b> 11. </b> Cost Optimizations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/13-clean-up/" title="Clean Up" class="dd-item 
        
        
        
        ">
      <a href="/13-clean-up/">
           <b> 12. </b> Clean Up
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://aws.amazon.com/blogs"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/2-fundamentals/2.4-ecs_task_definition/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/2-fundamentals/2.4-ecs_task_definition/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    <b>Authors</b> <br>
    <ul>
        <li><a href="http://linkedin.com/in/tranvix0910" style="color:orange;">Trần Vĩ</a></li>
    </ul>
</left>

<left>
    
    <b>Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7836256&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" alt="web counter" border="0" /> <br>
    <b><a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total Cloud Journey" alt="web counter" border="0" />
</left>

<left>
    <br>
    <br>
    <b>Last Updated</b> <br>
    <i><font color=orange>20-01-2025</font></i>
</left>

<left>
    <br>
    <br>
    <b>Team</b> <br>
    <i><a href="https://www.linkedin.com/in/jotaguy" style="color:orange">Gia Hưng</a></i>
</left>


<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Workshop Amazon Elastic Container Service & AWS Fargate</a> > <a href='/2-fundamentals/'>Fundamentals</a> > Amazon ECS Task Definition
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#amazon-ecs-task-definition">Amazon ECS Task Definition</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Amazon ECS Task Definition
            </h1>
          

        



	<h3 id="amazon-ecs-task-definition">Amazon ECS Task Definition</h3>
<p>A Task Definition is a JSON blueprint describing how one or more Docker containers will run in AWS ECS. It is like a recipe or template containing all the necessary configurations to launch containers, including Docker image, CPU, memory, port mappings, environment variables, logging, and more.</p>
<h4 id="main-components-of-task-definition">Main Components of Task Definition</h4>
<p>Task Definition is divided into two levels of configuration: <strong>Task-level parameters</strong> and <strong>Container definitions</strong>.</p>
<p><strong>Task-Level Parameters</strong></p>
<ul>
<li>
<p><strong>Family</strong>: Name of the Task Definition family. This is the name used to identify the task definition. For example: &ldquo;my-web-app&rdquo;, &ldquo;data-processor&rdquo;. When updating a task definition, a new revision is created but the family name remains the same.​</p>
</li>
<li>
<p><strong>Task Size (CPU &amp; Memory)</strong>: Total amount of CPU and memory allocated for the entire task. This is different from CPU/memory at the container level. With Fargate, these values are required and must be specific supported values (e.g., 0.25 vCPU with 0.5GB-1GB memory). With EC2, these values are optional.​</p>
</li>
<li>
<p><strong>Network Mode</strong>: How containers will connect to the network:​</p>
<ul>
<li>
<p><strong>awsvpc</strong>: Each task receives its own Elastic Network Interface (ENI) with a private IP address from the VPC. This allows the task to operate like an EC2 instance in the VPC. This is the only mode supported by Fargate and recommended for EC2.​</p>
</li>
<li>
<p><strong>bridge</strong>: Containers connect through Docker bridge network. Containers on the same host can communicate with each other. Port mapping is used to expose ports.​</p>
</li>
<li>
<p><strong>host</strong>: Containers share the network namespace with the host. Container ports are mapped directly to host ports. Not recommended as it reduces isolation.</p>
</li>
<li>
<p><strong>none</strong>: Containers have no network connectivity.​</p>
</li>
</ul>
</li>
<li>
<p><strong>Launch Type</strong>: Where the task will run:</p>
<ul>
<li>
<p><strong>EC2</strong>: Task runs on EC2 instances managed by you.</p>
</li>
<li>
<p><strong>Fargate</strong>: AWS manages infrastructure, you only need to define requirements</p>
</li>
</ul>
</li>
<li>
<p><strong>Execution Role (Task Execution Role ARN)</strong>: IAM role for the ECS Container Agent. This role allows the agent to pull Docker images from ECR, push logs to CloudWatch, get secrets from Secrets Manager.​</p>
</li>
<li>
<p><strong>Task Role</strong>: IAM role for the application inside the container. This role grants permissions for code to access AWS services such as S3, DynamoDB, SNS, etc.​</p>
</li>
<li>
<p><strong>Platform</strong>: CPU architecture type (x86_64 or ARM64). With ARM64, you can use AWS Graviton processors which are more cost-effective.​</p>
</li>
</ul>
<p><strong>Container Definitions</strong></p>
<p>A Task Definition can contain one or more container definitions. Each container definition describes a separate container that will run as part of the task.</p>
<ul>
<li>
<p><strong>Name</strong>: Name of the container (e.g., <code>web-server</code>, <code>database-client</code>). Required.​</p>
</li>
<li>
<p><strong>Image</strong>: Docker image URI to use. Can be from Docker Hub (e.g., <code>nginx:latest</code>) or from Amazon ECR (e.g., <code>123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:1.0.0</code>). Required.​</p>
</li>
<li>
<p><strong>CPU</strong>: Number of CPU units allocated to this container. 1 vCPU = 1024 CPU units. If task size is 1 vCPU and there are 2 containers, you can allocate 512 units to each container. If set to 0, the container will use remaining CPU units not allocated to other containers.​</p>
</li>
<li>
<p><strong>Memory</strong>: Memory in MB. It can be:</p>
<ul>
<li>
<p><strong>hard limit (memory)</strong>: Maximum memory the container can use. If exceeded, the container is stopped.</p>
</li>
<li>
<p><strong>soft limit (memoryReservation)</strong>: Memory guaranteed to be available for the container.​</p>
</li>
</ul>
</li>
<li>
<p><strong>Port Mappings</strong>: Maps container ports to host ports. For example: containerPort 8080 → hostPort 0 means the container runs on port 8080, but exposes through dynamic port mapping on the host.​</p>
<ul>
<li>
<p><strong>Essential</strong>: Boolean flag. If <strong>true</strong>, if this container fails, the entire task will be stopped. At least one container must have <strong>essential=true</strong>. If false, the task will continue running even if this container stops.​</p>
</li>
<li>
<p><strong>Environment Variables</strong>: Environment variables passed to the container. For example: <code>SERVER_PORT=8080</code>, <code>DATABASE_HOST=db.example.com</code>.​</p>
</li>
</ul>
</li>
<li>
<p><strong>Logging Configuration</strong>: How logs will be written. Options include:</p>
<ul>
<li>
<p><strong>awslogs</strong>: Logs pushed to AWS CloudWatch</p>
</li>
<li>
<p><strong>splunk</strong>: Logs pushed to Splunk</p>
</li>
<li>
<p><strong>datadog</strong>: Logs pushed to Datadog</p>
</li>
<li>
<p><strong>awsfirelens</strong>: Use Fluent Bit or Fluentd</p>
</li>
</ul>
</li>
</ul>
<p>Example CloudWatch configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;logConfiguration&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;logDriver&#34;</span>: <span style="color:#e6db74">&#34;awslogs&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;options&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;awslogs-group&#34;</span>: <span style="color:#e6db74">&#34;/ecs/my-task&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;awslogs-region&#34;</span>: <span style="color:#e6db74">&#34;us-east-1&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;awslogs-stream-prefix&#34;</span>: <span style="color:#e6db74">&#34;ecs&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong>Mount Points</strong>: Maps volumes into containers. Includes:</p>
<ul>
<li>
<p><strong>sourceVolume</strong>: Name of the volume defined at task-level</p>
</li>
<li>
<p><strong>containerPath</strong>: Path inside the container where the volume is mounted (e.g., /data)</p>
</li>
<li>
<p><strong>readOnly</strong>: Whether it is read-only​</p>
</li>
</ul>
</li>
<li>
<p><strong>Health Check</strong>: Configuration to check container health:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;healthCheck&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;command&#34;</span>: [<span style="color:#e6db74">&#34;CMD-SHELL&#34;</span>, <span style="color:#e6db74">&#34;curl -f http://localhost:8080/health || exit 1&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;interval&#34;</span>: <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;timeout&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;retries&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;startPeriod&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Volumes (Data Storage)​</strong></p>
<ul>
<li>
<p><strong>Volumes</strong>: Volumes are defined at task-level but are mounted into containers through mount points. Volume types include:</p>
<ul>
<li>
<p><strong>EBS Volumes</strong>: Amazon Elastic Block Store volumes for persistent storage (EC2 only)</p>
</li>
<li>
<p><strong>EFS Volumes</strong>: Amazon Elastic File System for shared persistent storage between multiple tasks/instances</p>
</li>
<li>
<p><strong>FSx Volumes</strong>: FSx for Windows File Server volumes</p>
</li>
<li>
<p><strong>Bind Mounts</strong>: Mount a path from the host EC2 instance into the container</p>
</li>
<li>
<p><strong>Docker Volumes</strong>: Docker-managed volumes</p>
</li>
</ul>
</li>
</ul>
<p>Example volume definition:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;volumes&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;my-efs&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;efsVolumeConfiguration&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;fileSystemId&#34;</span>: <span style="color:#e6db74">&#34;fs-1234567&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;transitEncryption&#34;</span>: <span style="color:#e6db74">&#34;ENABLED&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;my-bind-volume&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;host&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;sourcePath&#34;</span>: <span style="color:#e6db74">&#34;/mnt/data&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><strong>Versioning and Revisions​</strong></p>
<p>Task Definitions are immutable. This means you cannot edit an existing task definition. Instead, you must create a new revision.​</p>
<p>A revision is a copy of the current task definition with changes applied. Each task definition family can have multiple revisions:</p>
<ul>
<li>
<p><strong>my-app:1 (revision 1)</strong>.</p>
</li>
<li>
<p><strong>my-app:2 (revision 2)</strong>.</p>
</li>
<li>
<p><strong>my-app:3 (revision 3)</strong>.</p>
</li>
</ul>
<p>When updating a service or running a task, specify <strong>family:revision</strong> to use (e.g., &ldquo;my-app:3&rdquo;). This allows easy rollback to an old revision if there is an issue by simply updating the service to use the previous revision.​</p>
<p>Advantages of this architecture:</p>
<ul>
<li>
<p><strong>Audit trail</strong>: Can view all changes that have been made.</p>
</li>
<li>
<p><strong>Easy rollback</strong>: Roll back to an old revision if needed.</p>
</li>
<li>
<p><strong>Version control</strong>: Like version control for infrastructure.</p>
</li>
</ul>
<p><strong>Task Definition JSON</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;family&#34;</span>: <span style="color:#e6db74">&#34;my-web-app&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cpu&#34;</span>: <span style="color:#e6db74">&#34;256&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;memory&#34;</span>: <span style="color:#e6db74">&#34;512&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;networkMode&#34;</span>: <span style="color:#e6db74">&#34;awsvpc&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;requiresCompatibilities&#34;</span>: [<span style="color:#e6db74">&#34;FARGATE&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;executionRoleArn&#34;</span>: <span style="color:#e6db74">&#34;arn:aws:iam::123456789012:role/ecsTaskExecutionRole&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;taskRoleArn&#34;</span>: <span style="color:#e6db74">&#34;arn:aws:iam::123456789012:role/ecsTaskRole&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;containerDefinitions&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;web-server&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;image&#34;</span>: <span style="color:#e6db74">&#34;123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:1.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cpu&#34;</span>: <span style="color:#ae81ff">256</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;memory&#34;</span>: <span style="color:#ae81ff">512</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;essential&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;portMappings&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;containerPort&#34;</span>: <span style="color:#ae81ff">8080</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;hostPort&#34;</span>: <span style="color:#ae81ff">8080</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;protocol&#34;</span>: <span style="color:#e6db74">&#34;tcp&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;logConfiguration&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;logDriver&#34;</span>: <span style="color:#e6db74">&#34;awslogs&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;options&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;awslogs-group&#34;</span>: <span style="color:#e6db74">&#34;/ecs/my-web-app&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;awslogs-region&#34;</span>: <span style="color:#e6db74">&#34;us-east-1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;awslogs-stream-prefix&#34;</span>: <span style="color:#e6db74">&#34;ecs&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;environment&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;ENVIRONMENT&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;production&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;DATABASE_HOST&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;db.example.com&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>




<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/2-fundamentals/2.3-ecs_task/" title="Amazon ECS Task"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/4-express-mode/" title="Express Mode" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1765820632"></script>
    <script src="/js/perfect-scrollbar.min.js?1765820632"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1765820632"></script>
    <script src="/js/jquery.sticky.js?1765820632"></script>
    <script src="/js/featherlight.min.js?1765820632"></script>
    <script src="/js/highlight.pack.js?1765820632"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1765820632"></script>
    <script src="/js/learn.js?1765820632"></script>
    <script src="/js/hugo-learn.js?1765820632"></script>

    <link href="/mermaid/mermaid.css?1765820632" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1765820632"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
