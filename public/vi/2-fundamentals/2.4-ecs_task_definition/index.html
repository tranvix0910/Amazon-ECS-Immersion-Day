<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="http://localhost:1313/images/favicon.png" type="image/png">

    <title>Amazon ECS Task Definition :: TRIỂN KHAI ỨNG DỤNG TRÊN AMAZON ELASTIC CONTAINER SERVICE</title>

    
    <link href="http://localhost:1313/css/nucleus.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/fontawesome-all.min.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/hybrid.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/featherlight.min.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/perfect-scrollbar.min.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/auto-complete.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/atom-one-dark-reasonable.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/theme.css?1765856842" rel="stylesheet">
    <link href="http://localhost:1313/css/hugo-theme.css?1765856842" rel="stylesheet">
    
    <link href="http://localhost:1313/css/theme-workshop.css?1765856842" rel="stylesheet">
    
    

    <script src="http://localhost:1313/js/jquery-3.3.1.min.js?1765856842"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="http://localhost:1313/vi/2-fundamentals/2.4-ecs_task_definition/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://localhost:1313/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="http://localhost:1313/js/lunr.min.js?1765856842"></script>
<script type="text/javascript" src="http://localhost:1313/js/auto-complete.js?1765856842"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/\/vi";
    
</script>
<script type="text/javascript" src="http://localhost:1313/js/search.js?1765856842"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduction/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/1-introduction/">
           <b> 1. </b> Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-fundamentals/" title="Các khái niệm cơ bản" class="dd-item 
        parent
        
        
        ">
      <a href="http://localhost:1313/vi/2-fundamentals/">
           <b> 2. </b> Các khái niệm cơ bản
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-fundamentals/2.1-ecs_cluster/" title="Amazon ECS Cluster" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/2-fundamentals/2.1-ecs_cluster/">
           <b> 2.1. </b> Amazon ECS Cluster
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-fundamentals/2.2-ecs_service/" title="Amazon ECS Service" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/2-fundamentals/2.2-ecs_service/">
           <b> 2.2. </b> Amazon ECS Service
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-fundamentals/2.3-ecs_task/" title="Amazon ECS Task" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/2-fundamentals/2.3-ecs_task/">
           <b> 2.3. </b> Amazon ECS Task
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-fundamentals/2.4-ecs_task_definition/" title="Amazon ECS Task Definition" class="dd-item 
        
        active
        
        ">
      <a href="http://localhost:1313/vi/2-fundamentals/2.4-ecs_task_definition/">
           <b> 2.4. </b> Amazon ECS Task Definition
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-prepare/" title="Chuẩn bị" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/3-prepare/">
           <b> 3. </b> Chuẩn bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-prepare/3.1-user_accesskey/" title="Tạo User &amp; Access Key" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/3-prepare/3.1-user_accesskey/">
           <b> 3.1. </b> Tạo User &amp; Access Key
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-prepare/3.2-cluster-task_definitions/" title="Tạo Cluster &amp; Task Definition" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/3-prepare/3.2-cluster-task_definitions/">
           <b> 3.2. </b> Tạo Cluster &amp; Task Definition
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-prepare/3.3-services/" title="Services" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/3-prepare/3.3-services/">
           <b> 3.3. </b> Services
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-prepare/3.4-updated_services/" title="Cập nhật Services" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/3-prepare/3.4-updated_services/">
           <b> 3.4. </b> Cập nhật Services
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-prepare/3.5-enable_ecs_exec/" title="Enable ECS Exec" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/3-prepare/3.5-enable_ecs_exec/">
           <b> 3.5. </b> Enable ECS Exec
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-express-mode/" title="Express Mode" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/4-express-mode/">
           <b> 4. </b> Express Mode
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4-express-mode/4.1-setup_deploy/" title="Express Mode Setup &amp; Deployment" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/4-express-mode/4.1-setup_deploy/">
           <b> 4.1. </b> Express Mode Setup &amp; Deployment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-express-mode/4.2-update/" title="Express Mode Update" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/4-express-mode/4.2-update/">
           <b> 4.2. </b> Express Mode Update
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-managed-instances/" title="ECS Managed Instances" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/5-managed-instances/">
           <b> 5. </b> ECS Managed Instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5-managed-instances/5.1-enable/" title="Enable ECS Managed Instances" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/5-managed-instances/5.1-enable/">
           <b> 5.1. </b> Enable ECS Managed Instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-auto-scaling/" title="Auto Scaling" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/6-auto-scaling/">
           <b> 6. </b> Auto Scaling
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/7-networking/" title="Networking" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/7-networking/">
           <b> 7. </b> Networking
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/8-observability/" title="Observability" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/8-observability/">
           <b> 8. </b> Observability
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/9-security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/9-security/">
           <b> 9. </b> Security
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/10-deployments/" title="Deployments" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/10-deployments/">
           <b> 10. </b> Deployments
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/11-storage/" title="Storage" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/11-storage/">
           <b> 11. </b> Storage
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/12-cost-optimizations/" title="Cost Optimizations" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/12-cost-optimizations/">
           <b> 12. </b> Cost Optimizations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/13-clean-up/" title="Clean Up" class="dd-item 
        
        
        
        ">
      <a href="http://localhost:1313/vi/13-clean-up/">
           <b> 13. </b> Clean Up
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - Nhóm FB</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="http://localhost:1313/2-fundamentals/2.4-ecs_task_definition/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="http://localhost:1313/vi/2-fundamentals/2.4-ecs_task_definition/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    <b>Authors</b> <br>
    <ul>
        <li><a href="http://linkedin.com/in/tranvix0910" style="color:orange;">Trần Vĩ</a></li>
    </ul>
</left>

<left>
    
    <b>Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7836256&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" alt="web counter" border="0" /> <br>
    <b><a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total Cloud Journey" alt="web counter" border="0" />
</left>

<left>
    <br>
    <br>
    <b>Last Updated</b> <br>
    <i><font color=orange>20-01-2025</font></i>
</left>

<left>
    <br>
    <br>
    <b>Team</b> <br>
    <i><a href="https://www.linkedin.com/in/jotaguy" style="color:orange">Gia Hưng</a></i>
</left>


<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='http://localhost:1313/vi/'>Workshop Amazon Elastic Container Service & AWS Fargate</a> > <a href='http://localhost:1313/vi/2-fundamentals/'>Các khái niệm cơ bản</a> > Amazon ECS Task Definition
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#amazon-ecs-task-definition">Amazon ECS Task Definition</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Amazon ECS Task Definition
            </h1>
          

        



	<h3 id="amazon-ecs-task-definition">Amazon ECS Task Definition</h3>
<p>Task Definition là một bản thiết kế (blueprint) JSON mô tả cách một hoặc nhiều Docker containers sẽ chạy trong AWS ECS. Nó giống như một công thức hoặc template chứa tất cả các cấu hình cần thiết để khởi chạy containers, bao gồm Docker image, CPU, memory, port mappings, environment variables, logging, và nhiều hơn nữa.</p>
<h4 id="các-thành-phần-chính-của-task-definition">Các Thành Phần Chính Của Task Definition</h4>
<p>Task Definition chia thành hai mức độ cấu hình: <strong>Task-level parameters (cấp độ task)</strong> và <strong>Container definitions (cấp độ container)</strong>.</p>
<p><strong>Task-Level Parameters (Cấp Độ Task)</strong></p>
<ul>
<li>
<p><strong>Family</strong>: Tên của Task Definition family. Đây là tên sẽ sử dụng để nhận diện task definition. Ví dụ: &ldquo;my-web-app&rdquo;, &ldquo;data-processor&rdquo;. Khi cập nhật task definition, một revision mới được tạo nhưng family name vẫn giữ nguyên.​</p>
</li>
<li>
<p><strong>Task Size (CPU &amp; Memory)</strong>: Tổng lượng CPU và memory được cấp phát cho toàn bộ task. Điều này khác biệt với CPU/memory ở mức container. Với Fargate, các giá trị này là bắt buộc và phải là những giá trị hỗ trợ cụ thể (ví dụ: 0.25 vCPU với 0.5GB-1GB memory). Với EC2, các giá trị này là tùy chọn.​</p>
</li>
<li>
<p><strong>Network Mode</strong>: Cách containers sẽ kết nối với network:​</p>
<ul>
<li>
<p><strong>awsvpc</strong>: Mỗi task nhận một Elastic Network Interface (ENI) riêng với IP address riêng từ VPC. Điều này cho phép task hoạt động như một EC2 instance trong VPC. Đây là mode duy nhất được hỗ trợ bởi Fargate và khuyến nghị cho EC2.​</p>
</li>
<li>
<p><strong>bridge</strong>: Containers kết nối qua Docker bridge network. Các containers trên cùng host có thể giao tiếp với nhau. Port mapping được sử dụng để expose ports.​</p>
</li>
<li>
<p><strong>host</strong>: Containers chia sẻ network namespace với host. Container ports được map trực tiếp với host ports. Không khuyến nghị vì nó giảm isolation.</p>
</li>
<li>
<p><strong>none</strong>: Containers không có network connectivity.​</p>
</li>
</ul>
</li>
<li>
<p><strong>Launch Type</strong>: Nơi task sẽ chạy:</p>
<ul>
<li>
<p><strong>EC2</strong>: Task chạy trên EC2 instances được quản lý bởi bạn.</p>
</li>
<li>
<p><strong>Fargate</strong>: AWS quản lý infrastructure, chỉ cần định nghĩa requirements</p>
</li>
</ul>
</li>
<li>
<p><strong>Execution Role (Task Execution Role ARN)</strong>: IAM role cho ECS Container Agent. Role này cho phép agent kéo Docker images từ ECR, đẩy logs đến CloudWatch, lấy secrets từ Secrets Manager.​</p>
</li>
<li>
<p><strong>Task Role</strong>: IAM role cho ứng dụng bên trong container. Role này cấp quyền cho code truy cập các dịch vụ AWS như S3, DynamoDB, SNS, v.v.​</p>
</li>
<li>
<p><strong>Platform</strong>: Loại CPU architecture (x86_64 hoặc ARM64). Với ARM64, có thể sử dụng AWS Graviton processors tiết kiệm chi phí hơn.​</p>
</li>
</ul>
<p><strong>Container Definitions (Cấp Độ Container)</strong></p>
<p>Task Definition có thể chứa một hoặc nhiều container definitions. Mỗi container definition mô tả một container riêng biệt sẽ chạy như một phần của task.</p>
<ul>
<li>
<p><strong>Name</strong>: Tên của container (ví dụ: <code>web-server</code>, <code>database-client</code>). Bắt buộc phải có.​</p>
</li>
<li>
<p><strong>Image</strong>: Docker image URI để sử dụng. Có thể là từ Docker Hub (ví dụ: <code>nginx:latest</code>) hoặc từ Amazon ECR (ví dụ: <code>123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:1.0.0</code>). Bắt buộc phải có.​</p>
</li>
<li>
<p><strong>CPU</strong>: Số CPU units được cấp phát cho container này. 1 vCPU = 1024 CPU units. Nếu có task size là 1 vCPU và 2 containers, có thể cấp phát 512 units cho mỗi container. Nếu để 0, container sẽ sử dụng CPU units còn lại không được cấp phát cho containers khác.​</p>
</li>
<li>
<p><strong>Memory</strong>: Bộ nhớ tính bằng MB. Nó có thể là:</p>
<ul>
<li>
<p><strong>hard limit (memory)</strong>: Memory tối đa mà container có thể sử dụng. Nếu vượt quá, container bị dừng.</p>
</li>
<li>
<p><strong>soft limit (memoryReservation)</strong>: Memory được đảm bảo sẵn sàng cho container.​</p>
</li>
</ul>
</li>
<li>
<p><strong>Ví dụ</strong>: containerPort 8080 → hostPort 0 có nghĩa container chạy trên port 8080, nhưng expose qua dynamic port mapping trên host.​</p>
<ul>
<li>
<p><strong>Essential</strong>: Boolean flag. Nếu <strong>true</strong>, nếu container này gặp sự cố, cả task sẽ bị dừng. Ít nhất một container phải có <strong>essential=true</strong>. Nếu false, task sẽ tiếp tục chạy ngay cả khi container này dừng.​</p>
</li>
<li>
<p><strong>Environment Variables</strong>: Các biến môi trường được truyền vào container. Ví dụ: <code>SERVER_PORT=8080</code>, <code>DATABASE_HOST=db.example.com</code>.​</p>
</li>
</ul>
</li>
<li>
<p><strong>Logging Configuration</strong>: Cách logs sẽ được ghi. Các tùy chọn bao gồm:</p>
<ul>
<li>
<p><strong>awslogs</strong>: Logs đẩy đến AWS CloudWatch</p>
</li>
<li>
<p><strong>splunk</strong>: Logs đẩy đến Splunk</p>
</li>
<li>
<p><strong>datadog</strong>: Logs đẩy đến Datadog</p>
</li>
<li>
<p><strong>awsfirelens</strong>: Sử dụng Fluent Bit hoặc Fluentd</p>
</li>
</ul>
</li>
</ul>
<p>Ví dụ cấu hình CloudWatch:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;logConfiguration&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;logDriver&#34;</span>: <span style="color:#e6db74">&#34;awslogs&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;options&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;awslogs-group&#34;</span>: <span style="color:#e6db74">&#34;/ecs/my-task&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;awslogs-region&#34;</span>: <span style="color:#e6db74">&#34;us-east-1&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;awslogs-stream-prefix&#34;</span>: <span style="color:#e6db74">&#34;ecs&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong>Mount Points</strong>: Ánh xạ volumes vào container. Gồm:</p>
<ul>
<li>
<p><strong>sourceVolume</strong>: Tên của volume được định nghĩa ở task-level</p>
</li>
<li>
<p><strong>containerPath</strong>: Đường dẫn bên trong container nơi volume được mount (ví dụ: /data)</p>
</li>
<li>
<p><strong>readOnly</strong>: Có là read-only không​</p>
</li>
</ul>
</li>
<li>
<p><strong>Health Check</strong>: Cấu hình kiểm tra sức khỏe của container:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;healthCheck&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;command&#34;</span>: [<span style="color:#e6db74">&#34;CMD-SHELL&#34;</span>, <span style="color:#e6db74">&#34;curl -f http://localhost:8080/health || exit 1&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;interval&#34;</span>: <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;timeout&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;retries&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;startPeriod&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Volumes (Lưu Trữ Dữ Liệu)​</strong></p>
<ul>
<li>
<p><strong>Volumes</strong>: Volumes được định nghĩa ở task-level nhưng được mount vào containers thông qua mount points. Các loại volumes bao gồm:</p>
<ul>
<li>
<p><strong>EBS Volumes</strong>: Amazon Elastic Block Store volumes cho persistent storage (chỉ EC2)</p>
</li>
<li>
<p><strong>EFS Volumes</strong>: Amazon Elastic File System cho shared persistent storage giữa nhiều tasks/instances</p>
</li>
<li>
<p><strong>FSx Volumes</strong>: FSx for Windows File Server volumes</p>
</li>
<li>
<p><strong>Bind Mounts</strong>: Mount một đường dẫn từ host EC2 instance vào container</p>
</li>
<li>
<p><strong>Docker Volumes</strong>: Docker-managed volumes</p>
</li>
</ul>
</li>
</ul>
<p>Ví dụ định nghĩa volume:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;volumes&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;my-efs&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;efsVolumeConfiguration&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;fileSystemId&#34;</span>: <span style="color:#e6db74">&#34;fs-1234567&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;transitEncryption&#34;</span>: <span style="color:#e6db74">&#34;ENABLED&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;my-bind-volume&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;host&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;sourcePath&#34;</span>: <span style="color:#e6db74">&#34;/mnt/data&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><strong>Versioning và Revisions​</strong></p>
<p>Task Definitions là bất biến (immutable). Điều này có nghĩa là bạn không thể chỉnh sửa một task definition hiện có. Thay vào đó, bạn phải tạo một revision mới.​</p>
<p>Revision là một bản sao của task definition hiện tại với những thay đổi được áp dụng. Mỗi task definition family có thể có nhiều revisions:</p>
<ul>
<li>
<p><strong>my-app:1 (revision 1)</strong>.</p>
</li>
<li>
<p><strong>my-app:2 (revision 2)</strong>.</p>
</li>
<li>
<p><strong>my-app:3 (revision 3)</strong>.</p>
</li>
</ul>
<p>Khi cập nhật một service hoặc chạy một task, chỉ định <strong>family:revision</strong> để sử dụng (ví dụ: &ldquo;my-app:3&rdquo;). Điều này cho phép dễ dàng rollback đến revision cũ nếu có vấn đề bằng cách chỉ cập nhật service để sử dụng revision trước đó.​</p>
<p>Ưu điểm của kiến trúc này:</p>
<ul>
<li>
<p><strong>Audit trail</strong>: Có thể xem tất cả các thay đổi đã được thực hiện.</p>
</li>
<li>
<p><strong>Easy rollback</strong>: Quay lại revision cũ nếu cần.</p>
</li>
<li>
<p><strong>Version control</strong>: Giống như version control cho infrastructure.</p>
</li>
</ul>
<p><strong>Task Definition JSON</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;family&#34;</span>: <span style="color:#e6db74">&#34;my-web-app&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cpu&#34;</span>: <span style="color:#e6db74">&#34;256&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;memory&#34;</span>: <span style="color:#e6db74">&#34;512&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;networkMode&#34;</span>: <span style="color:#e6db74">&#34;awsvpc&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;requiresCompatibilities&#34;</span>: [<span style="color:#e6db74">&#34;FARGATE&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;executionRoleArn&#34;</span>: <span style="color:#e6db74">&#34;arn:aws:iam::123456789012:role/ecsTaskExecutionRole&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;taskRoleArn&#34;</span>: <span style="color:#e6db74">&#34;arn:aws:iam::123456789012:role/ecsTaskRole&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;containerDefinitions&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;web-server&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;image&#34;</span>: <span style="color:#e6db74">&#34;123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:1.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cpu&#34;</span>: <span style="color:#ae81ff">256</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;memory&#34;</span>: <span style="color:#ae81ff">512</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;essential&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;portMappings&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;containerPort&#34;</span>: <span style="color:#ae81ff">8080</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;hostPort&#34;</span>: <span style="color:#ae81ff">8080</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;protocol&#34;</span>: <span style="color:#e6db74">&#34;tcp&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;logConfiguration&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;logDriver&#34;</span>: <span style="color:#e6db74">&#34;awslogs&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;options&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;awslogs-group&#34;</span>: <span style="color:#e6db74">&#34;/ecs/my-web-app&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;awslogs-region&#34;</span>: <span style="color:#e6db74">&#34;us-east-1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;awslogs-stream-prefix&#34;</span>: <span style="color:#e6db74">&#34;ecs&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;environment&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;ENVIRONMENT&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;production&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;DATABASE_HOST&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;db.example.com&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>




<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="http://localhost:1313/vi/2-fundamentals/2.3-ecs_task/" title="Amazon ECS Task"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="http://localhost:1313/vi/3-prepare/" title="Chuẩn bị" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="http://localhost:1313/js/clipboard.min.js?1765856842"></script>
    <script src="http://localhost:1313/js/perfect-scrollbar.min.js?1765856842"></script>
    <script src="http://localhost:1313/js/perfect-scrollbar.jquery.min.js?1765856842"></script>
    <script src="http://localhost:1313/js/jquery.sticky.js?1765856842"></script>
    <script src="http://localhost:1313/js/featherlight.min.js?1765856842"></script>
    <script src="http://localhost:1313/js/highlight.pack.js?1765856842"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="http://localhost:1313/js/modernizr.custom-3.6.0.js?1765856842"></script>
    <script src="http://localhost:1313/js/learn.js?1765856842"></script>
    <script src="http://localhost:1313/js/hugo-learn.js?1765856842"></script>

    <link href="http://localhost:1313/mermaid/mermaid.css?1765856842" rel="stylesheet" />
    <script src="http://localhost:1313/mermaid/mermaid.js?1765856842"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
